{
  // See https://go.microsoft.com/fwlink/?LinkId=733558
  // for the documentation about the tasks.json format
  "version": "2.0.0",
  "tasks": [
    {
      "type": "shell",
      "command": "cargo",
      "args": ["build", "--release"],
      "label": "Build (release)"
    },
    {
      "type": "shell",
      "command": "cargo",
      "args": ["build"],
      "label": "Build (debug)"
    },

    {
      "label": "Relative Gap (grid)",
      "type": "shell",
      "command": "sumo-relative-gap-calculator",
      "dependsOn": ["Build (debug)"],
      "options": {
        "cwd": "${workspaceFolder}/data/imported/sumo/grid",
        "env": {
          "PATH": "${workspaceFolder}:${workspaceFolder}/lib/InertialFlowCutter/build:${workspaceFolder}/target/debug/:${env:PATH}"
        }
      },
      "args": [
        "--net-dir",
        "${workspaceFolder}/import/sumo/grid",
        "--net-prefix",
        "grid",
        "--trips-file",
        "${workspaceFolder}/import/sumo/grid/grid.trips.xml"
      ]
    },
    {
      "label": "Compare Routes (grid)",
      "type": "shell",
      "command": "sumo-routes-comparator",
      "dependsOn": ["Build (debug)"],
      "options": {
        "cwd": "${workspaceFolder}/data/imported/sumo/grid-dijkstra",
        "env": {
          "PATH": "${workspaceFolder}:${workspaceFolder}/lib/InertialFlowCutter/build:${workspaceFolder}/target/debug/:${env:PATH}"
        }
      },
      "args": [
        "--net-dir",
        "${workspaceFolder}/import/sumo/grid",
        "--net-prefix",
        "grid",
        "--trips-file",
        "${workspaceFolder}/import/sumo/grid/grid.trips.xml"
      ]
    },
    {
      "label": "Run DTA (grid)",
      "type": "shell",
      "command": "python",
      "dependsOn": [
        "Build (debug)",
        "Copy duaIterate.py to SUMO",
        "Clean grid"
      ],
      "options": {
        "cwd": "${workspaceFolder}/data/imported/sumo/grid",
        "env": {
          "PATH": "${workspaceFolder}:${workspaceFolder}/lib/InertialFlowCutter/build:${workspaceFolder}/target/debug/:${workspaceFolder}/lib/libsumo/bin/:${env:PATH}",
          "RUST_BACKTRACE": "1"
        }
      },
      "args": [
        "${workspaceFolder}/lib/libsumo/lib/python3.12/site-packages/sumo/tools/assign/duaIterate.py",
        "-n",
        "${workspaceFolder}/import/sumo/grid/grid.net.xml",
        "-t",
        "${workspaceFolder}/import/sumo/grid/grid.trips.xml",
        "--routing-algorithm",
        "CCH",
        "--mesosim",
        "--aggregation",
        "300",
        "--begin",
        "0",
        "--end",
        "12000",
        "--relative-gap",
        "0.0001",
        "--max-convergence-deviation",
        "0.0000001",
        "sumo--default.speeddev",
        "0.0",
        "cch-preprocessor--input-prefix",
        "grid",
        "cch-preprocessor--input-dir",
        "${workspaceFolder}/import/sumo/grid",
        "relative-gap--net-prefix",
        "grid",
        "relative-gap--net-dir",
        "${workspaceFolder}/import/sumo/grid"
      ]
    },
    {
      "label": "Run DTA (random)",
      "type": "shell",
      "command": "python",
      "dependsOn": [
        "Build (release)",
        "Copy duaIterate.py to SUMO",
        "Clean random"
      ],
      "options": {
        "cwd": "${workspaceFolder}/data/imported/sumo/random",
        "env": {
          "PATH": "${workspaceFolder}:${workspaceFolder}/lib/InertialFlowCutter/build:${workspaceFolder}/target/release/:${workspaceFolder}/lib/libsumo/bin/:${env:PATH}",
          "RUST_BACKTRACE": "1"
        }
      },
      "args": [
        "${workspaceFolder}/lib/libsumo/lib/python3.12/site-packages/sumo/tools/assign/duaIterate.py",
        "-n",
        "${workspaceFolder}/import/sumo/random/random.net.xml",
        "-t",
        "${workspaceFolder}/import/sumo/random/random.trips.xml",
        "--routing-algorithm",
        "CCH",
        "--mesosim",
        "--aggregation",
        "300",
        "--begin",
        "0",
        "--end",
        "86400",
        "--relative-gap",
        "0.0001",
        "--max-convergence-deviation",
        "0.0000001",
        "duarouter--precision",
        "6",
        "sumo--default.speeddev",
        "0.0",
        "sumo--step-length",
        "0.1",
        "sumo--precision",
        "6",
        "sumo--default.speeddev",
        "0.0",
        "cch-preprocessor--input-prefix",
        "random",
        "cch-preprocessor--input-dir",
        "${workspaceFolder}/import/sumo/random",
        "relative-gap--net-prefix",
        "random",
        "relative-gap--net-dir",
        "${workspaceFolder}/import/sumo/random"
      ]
    },
    {
      "label": "Run DTA (grid; CH)",
      "type": "shell",
      "command": "python",
      "dependsOn": [
        "Build (debug)",
        "Copy duaIterate.py to SUMO",
        "Clean grid-ch"
      ],
      "options": {
        "cwd": "${workspaceFolder}/data/imported/sumo/grid-ch",
        "env": {
          "PATH": "${workspaceFolder}:${workspaceFolder}/lib/InertialFlowCutter/build:${workspaceFolder}/target/debug/:${workspaceFolder}/lib/libsumo/bin/:${env:PATH}"
        }
      },
      "args": [
        "${workspaceFolder}/lib/libsumo/lib/python3.12/site-packages/sumo/tools/assign/duaIterate.py",
        "-n",
        "${workspaceFolder}/import/sumo/grid/grid.net.xml",
        "-t",
        "${workspaceFolder}/import/sumo/grid/grid.trips.xml",
        "--routing-algorithm",
        "CH",
        "--mesosim",
        "--aggregation",
        "60",
        "--begin",
        "0",
        "--end",
        "12000",
        "--relative-gap",
        "0.0001",
        "--max-convergence-deviation",
        "0.0000001",
        "duarouter--precision",
        "6",
        "sumo--default.speeddev",
        "0.0",
        "sumo--step-length",
        "0.1",
        "sumo--precision",
        "6",
        "duarouter--weights.interpolate",
        "relative-gap--net-prefix",
        "grid",
        "relative-gap--net-dir",
        "${workspaceFolder}/import/sumo/grid"
      ]
    },
    {
      "label": "Run DTA (grid; dijkstra)",
      "type": "shell",
      "command": "python",
      "dependsOn": [
        "Copy duaIterate.py to SUMO",
        "Clean grid-dijkstra",
        "Build (debug)"
      ],
      "options": {
        "cwd": "${workspaceFolder}/data/imported/sumo/grid-dijkstra",
        "env": {
          "PATH": "${workspaceFolder}:${workspaceFolder}/lib/InertialFlowCutter/build:${workspaceFolder}/target/debug/:${workspaceFolder}/lib/libsumo/bin/:${env:PATH}",
          "RUST_BACKTRACE": "1"
        }
      },
      "args": [
        "${workspaceFolder}/lib/libsumo/lib/python3.12/site-packages/sumo/tools/assign/duaIterate.py",
        "-n",
        "${workspaceFolder}/import/sumo/grid/grid.net.xml",
        "-t",
        "${workspaceFolder}/import/sumo/grid/grid.trips.xml",
        "--routing-algorithm",
        "dijkstra",
        "--mesosim",
        "--aggregation",
        "300",
        "--begin",
        "0",
        "--end",
        "12000",
        "--relative-gap",
        "0.0001",
        "--max-convergence-deviation",
        "0.0000001",
        "sumo--default.speeddev",
        "0.0",
        "duarouter--weights.interpolate",
        "relative-gap--net-prefix",
        "grid",
        "relative-gap--net-dir",
        "${workspaceFolder}/import/sumo/grid"
      ]
    },
    {
      "label": "Run DTA (grid; dijkstra-rust)",
      "type": "shell",
      "command": "python",
      "dependsOn": [
        "Copy duaIterate.py to SUMO",
        "Clean grid-dijkstra-rust",
        "Build (debug)"
      ],
      "options": {
        "cwd": "${workspaceFolder}/data/imported/sumo/grid-dijkstra-rust",
        "env": {
          "PATH": "${workspaceFolder}:${workspaceFolder}/lib/InertialFlowCutter/build:${workspaceFolder}/target/debug/:${workspaceFolder}/lib/libsumo/bin/:${env:PATH}",
          "RUST_BACKTRACE": "1"
        }
      },
      "args": [
        "${workspaceFolder}/lib/libsumo/lib/python3.12/site-packages/sumo/tools/assign/duaIterate.py",
        "-n",
        "${workspaceFolder}/import/sumo/grid/grid.net.xml",
        "-t",
        "${workspaceFolder}/import/sumo/grid/grid.trips.xml",
        "--routing-algorithm",
        "dijkstra-rust",
        "--mesosim",
        "--aggregation",
        "300",
        "--begin",
        "0",
        "--end",
        "12000",
        "--relative-gap",
        "0.0001",
        "--max-convergence-deviation",
        "0.0000001",
        "sumo--default.speeddev",
        "0.0",
        "dijkstra-preprocessor--input-prefix",
        "grid",
        "dijkstra-preprocessor--input-dir",
        "${workspaceFolder}/import/sumo/grid",
        "relative-gap--net-prefix",
        "grid",
        "relative-gap--net-dir",
        "${workspaceFolder}/import/sumo/grid"
      ]
    },
    {
      "label": "init subopt.-ex",
      "hide": true,
      "type": "shell",
      "dependsOn": ["suboptimal-routing (initial)"],
      "command": "cp",
      "options": {
        "cwd": "${workspaceFolder}/"
      },
      "args": [
        "import/sumo/suboptimal-routing/suboptimal-routing.tt.xml",
        "data/imported/sumo/suboptimal-routing/000/dump_60.0.xml"
      ]
    },
    {
      "label": "subopt.-ex. (cch)",
      "hide": true,
      "type": "shell",
      "dependsOn": [],
      "command": "python",
      "options": {
        "cwd": "${workspaceFolder}/data/imported/sumo/suboptimal-routing",
        "env": {
          "PATH": "${workspaceFolder}:${workspaceFolder}/lib/InertialFlowCutter/build:${workspaceFolder}/target/debug/:${workspaceFolder}/lib/libsumo/bin/:${env:PATH}"
        }
      },
      "args": [
        "${workspaceFolder}/lib/libsumo/lib/python3.12/site-packages/sumo/tools/assign/duaIterate.py",
        "-n",
        "${workspaceFolder}/import/sumo/suboptimal-routing/suboptimal-routing.net.xml",
        "-t",
        "${workspaceFolder}/import/sumo/suboptimal-routing/suboptimal-routing.trips.xml",
        "--routing-algorithm",
        "CCH",
        "--mesosim",
        "--aggregation",
        "60",
        "--begin",
        "0",
        "--end",
        "360",
        "-f",
        "1",
        "-l",
        "2",
        "sumo--default.speeddev",
        "0.0",
        "cch-preprocessor--input-prefix",
        "suboptimal-routing",
        "cch-preprocessor--input-dir",
        "${workspaceFolder}/import/sumo/suboptimal-routing"
      ]
    },
    {
      "label": "subopt.-ex. (sumo)",
      "hide": true,
      "type": "shell",
      "dependsOn": [],
      "command": "python",
      "options": {
        "cwd": "${workspaceFolder}/data/imported/sumo/suboptimal-routing",
        "env": {
          "PATH": "${workspaceFolder}:${workspaceFolder}/lib/InertialFlowCutter/build:${workspaceFolder}/target/debug/:${workspaceFolder}/lib/libsumo/bin/:${env:PATH}"
        }
      },
      "args": [
        "${workspaceFolder}/lib/libsumo/lib/python3.12/site-packages/sumo/tools/assign/duaIterate.py",
        "-n",
        "${workspaceFolder}/import/sumo/suboptimal-routing/suboptimal-routing.net.xml",
        "-t",
        "${workspaceFolder}/import/sumo/suboptimal-routing/suboptimal-routing.trips.xml",
        "--routing-algorithm",
        "dijkstra",
        "--mesosim",
        "--aggregation",
        "60",
        "--begin",
        "0",
        "--end",
        "360",
        "-f",
        "1",
        "-l",
        "2",
        "sumo--default.speeddev",
        "0.0",
        "duarouter--weights.interpolate"
      ]
    },
    {
      "label": "Clean grid",
      "type": "shell",
      "command": "rm",
      "options": {
        "cwd": "${workspaceFolder}/data/imported/sumo"
      },
      "args": ["-rf", "grid/*"],
      "hide": true
    },
    {
      "label": "Clean random",
      "type": "shell",
      "command": "rm",
      "options": {
        "cwd": "${workspaceFolder}/data/imported/sumo"
      },
      "args": ["-rf", "random/*"],
      "hide": true
    },
    {
      "label": "Clean grid-ch",
      "type": "shell",
      "command": "rm",
      "options": {
        "cwd": "${workspaceFolder}/data/imported/sumo"
      },
      "args": ["-rf", "grid-ch/*"],
      "hide": true
    },
    {
      "label": "Clean grid-dijkstra",
      "type": "shell",
      "command": "rm",
      "options": {
        "cwd": "${workspaceFolder}/data/imported/sumo"
      },
      "args": ["-rf", "grid-dijkstra/*"],
      "hide": true
    },
    {
      "label": "Clean grid-dijkstra-rust",
      "type": "shell",
      "command": "rm",
      "options": {
        "cwd": "${workspaceFolder}/data/imported/sumo"
      },
      "args": ["-rf", "grid-dijkstra-rust/*"],
      "hide": true
    },
    {
      "label": "Clean suboptimal-routing",
      "type": "shell",
      "command": "rm",
      "options": {
        "cwd": "${workspaceFolder}/data/imported/sumo"
      },
      "args": ["-rf", "suboptimal-routing/*"],
      "hide": true
    },
    {
      "label": "Clean karlsruhe",
      "type": "shell",
      "command": "rm",
      "options": {
        "cwd": "${workspaceFolder}/data/imported/sumo"
      },
      "args": ["-rf", "karlsruhe/*"],
      "hide": true
    },
    {
      "label": "Clean kelheim",
      "type": "shell",
      "command": "rm",
      "options": {
        "cwd": "${workspaceFolder}/data/imported/sumo"
      },
      "args": ["-rf", "kelheim/*"],
      "hide": true
    },
    {
      "label": "Copy duaIterate.py to SUMO",
      "type": "shell",
      "command": "cp",
      "options": {
        "cwd": "${workspaceFolder}/"
      },
      "args": [
        "fastdta/duaIterate.py",
        "lib/libsumo/lib/python3.12/site-packages/sumo/tools/assign/duaIterate.py"
      ],
      "hide": true
    },
    {
      "label": "suboptimal-routing (initial)",
      "hide": true,
      "type": "shell",
      "dependsOn": [
        "Build (debug)",
        "Copy duaIterate.py to SUMO",
        "Clean suboptimal-routing"
      ],
      "command": "python",
      "options": {
        "cwd": "${workspaceFolder}/data/imported/sumo/suboptimal-routing",
        "env": {
          "PATH": "${workspaceFolder}:${workspaceFolder}/lib/InertialFlowCutter/build:${workspaceFolder}/target/debug/:${workspaceFolder}/lib/libsumo/bin/:${env:PATH}"
        }
      },
      "args": [
        "${workspaceFolder}/lib/libsumo/lib/python3.12/site-packages/sumo/tools/assign/duaIterate.py",
        "-n",
        "${workspaceFolder}/import/sumo/suboptimal-routing/suboptimal-routing.net.xml",
        "-t",
        "${workspaceFolder}/import/sumo/suboptimal-routing/suboptimal-routing.trips.xml",
        "--routing-algorithm",
        "CCH",
        "--mesosim",
        "--aggregation",
        "60",
        "--begin",
        "0",
        "--end",
        "360",
        "-f",
        "0",
        "-l",
        "1",
        "sumo--default.speeddev",
        "0.0",
        "cch-preprocessor--input-prefix",
        "suboptimal-routing",
        "cch-preprocessor--input-dir",
        "${workspaceFolder}/import/sumo/suboptimal-routing"
      ]
    }
  ]
}
